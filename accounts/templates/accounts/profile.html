{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <script>
        function enableEdit(fieldId, buttonId) {
            document.getElementById(fieldId).removeAttribute('readonly');
            document.getElementById(fieldId).focus();
            document.getElementById(buttonId).style.display = 'none';
            document.getElementById(fieldId + '_save').style.display = 'inline-block';
        }
    </script>
</head>
<body>
    <div class="profile-container">

        <!-- Sidebar: Displays Saved Data -->
        <div class="profile-sidebar">
            <img src="{% if user.profile_image %}{{ user.profile_image.url }}{% else %}{% static 'images/default.jpg' %}{% endif %}" 
                 alt="User" class="profile-image">

            <h2>{{ user.first_name }} {{ user.last_name }}</h2>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>Phone:</strong> {{ user.phone }}</p>
            <p><strong>Last Updated:</strong> {{ user.date_updated }}</p>

            <a href="{% url 'home' %}" class="back-button">‚Üê Back to Home</a>
        </div>

        <!-- Edit Form Section -->
        <div class="profile-edit">
            <h2>Edit Profile</h2>
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- First Name -->
                <label>First Name:</label>
                <input type="text" id="first_name" name="first_name" value="{{ user.first_name }}" readonly>
                <button type="button" id="first_name_edit" onclick="enableEdit('first_name', 'first_name_edit')">Edit</button>
                <button type="submit" id="first_name_save" style="display: none;">Save</button>

                <!-- Last Name -->
                <label>Last Name:</label>
                <input type="text" id="last_name" name="last_name" value="{{ user.last_name }}" readonly>
                <button type="button" id="last_name_edit" onclick="enableEdit('last_name', 'last_name_edit')">Edit</button>
                <button type="submit" id="last_name_save" style="display: none;">Save</button>

                <!-- Email -->
                <label>Email:</label>
                <input type="email" id="email" name="email" value="{{ user.email }}" readonly>
                <button type="button" id="email_edit" onclick="enableEdit('email', 'email_edit')">Edit</button>
                <button type="submit" id="email_save" style="display: none;">Save</button>

                <!-- Phone -->
                <label>Phone:</label>
                <input type="text" id="phone" name="phone" value="{{ user.phone }}" readonly>
                <button type="button" id="phone_edit" onclick="enableEdit('phone', 'phone_edit')">Edit</button>
                <button type="submit" id="phone_save" style="display: none;">Save</button>

                <!-- Password -->
                <label>Password:</label>
                <input type="password" id="password" name="password" placeholder="Enter new password" readonly>
                <button type="button" id="password_edit" onclick="enableEdit('password', 'password_edit')">Edit</button>
                <button type="submit" id="password_save" style="display: none;">Save</button>

                <button type="submit" class="update-btn">Save All Changes</button>
            </form>
        </div>

    </div>
</body>
</html>
