{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ artist.first_name }} {{ artist.last_name }} - Profile</title>
    
    <!-- âœ… FontAwesome for Messenger Icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <link rel="stylesheet" href="{% static 'css/explore_artist2.css' %}">
    <link rel="stylesheet" href="{% static 'css/nav.css' %}">
    <!-- <link rel="stylesheet" href="{% static 'css/navbar.css' %}"> -->

    <style>
        body {
    background-color: #fff0f5; /* or your preferred color like #D8648C */
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
}
        /* âœ… Stylish Notification Badge */
        .badge {
            position: absolute;
            top: -5px;
            right: -10px;
            background: red;
            color: white;
            font-size: 12px;
            font-weight: bold;
            padding: 5px 8px;
            border-radius: 50%;
            display: none;
            animation: bounce 1s infinite;
        }

        /* âœ… Bounce Animation */
        @keyframes bounce {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }

        /* âœ… Positioning for Notification */
        .nav-item {
            position: relative;
            text-decoration: none;
            color: black;
            font-weight: bold;
            padding: 10px;
        }

        /* âœ… Responsive Design */
        @media (max-width: 768px) {
            .badge {
                font-size: 10px;
                padding: 3px 5px;
                top: -3px;
                right: -8px;
            }
        }
        body {
    background-color: #fff0f5; /* or your preferred color like #D8648C */
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    
}
        .work-section {
    text-align: center;
    padding: 50px 20px;
    background-color: #f8f9fa; /* Light gray background */
}

.work-section h3 {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 20px;
    color: #333;
}

.work-gallery {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px; /* Space between cards */
    padding-top: 10px;
}

.work-card {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    max-width: 600px;
    text-align: center;
}

.work-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.work-card img {
    width: 100%;
    height: 500px;
    object-fit: cover;
}

.work-card h4 {
    font-size: 1.5rem;
    margin: 15px 0;
    color: #444;
}

.work-card p {
    font-size: 1rem;
    color: #666;
    padding: 0 15px 20px;
}

/* Responsive Design */
@media (max-width: 768px) {
    .work-gallery {
        flex-direction: column;
        align-items: center;
    }

    .work-card {
        max-width: 90%;
    }
}

        /* ðŸŒ™ Dark Mode Styles */
        body.dark-mode {
            background-color: #121212;
            color: #ffffff;
        }

        .dark-mode .header,
        .dark-mode .navbar {
            background-color: #222;
        }

        .dark-mode .nav-link {
            color: white;
        }

        .dark-mode .search-form {
            background: #333;
            box-shadow: 0px 4px 6px rgba(255, 255, 255, 0.1);
        }

        .dark-mode input,
        .dark-mode textarea,
        .dark-mode select {
            background-color: #222;
            color: white;
            border: 1px solid #555;
        }

        .dark-mode .book-btn {
            background-color: #D8648C;
            color: white;
        }

        .dark-mode .book-btn:hover {
            background-color: #b24d70;
        }

        .dark-mode .artist-container {
            background-color: #1a1a1a;
        }

        /* âœ… Toggle Switch */
        #dark-mode-toggle {
            position: fixed;
            top: 10px;
            right: 20px;
            background: #222;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 5px;
        }

        .dark-mode #dark-mode-toggle {
            background: #f8f9fa;
            color: #222;
        }

        /* âœ… Messenger Icon Styling */
        .messenger-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #D8648C;
            color: white;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease-in-out;
        }

        .messenger-icon i {
            font-size: 24px;
        }

        .messenger-icon:hover {
            transform: scale(1.1);
        }

        /* âœ… Tooltip Styling */
        .messenger-icon .tooltip {
            position: absolute;
            bottom: 60px;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            white-space: nowrap;
        }

        .messenger-icon:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
        .certificates-container {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
}

.certificate-card {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    text-align: center;
    width: 250px;
}

.certificate-image {
    width: 100%;
    max-height: 200px;
    object-fit: contain;
    border-radius: 5px;
}

.certificate-actions {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
}

.view-btn, .edit-btn, .delete-btn {
    padding: 8px 12px;
    font-size: 14px;
    border-radius: 5px;
    text-align: center;
    transition: all 0.3s ease-in-out;
    display: inline-block;
    text-decoration: none;
}

.view-btn {
    background-color: #007bff;
    color: white;
}

.edit-btn {
    background-color: #ffc107;
    color: white;
}

.delete-btn {
    background-color: #dc3545;
    color: white;
}

.view-btn:hover, .edit-btn:hover, .delete-btn:hover {
    transform: scale(1.05);
}

    </style>
</head>
<body>
    {% include 'includes/nav.html' %}

    <div class="artist-container">
        <!-- âœ… Artist Information Section -->
        <div class="artist-profile">
            {% if artist.profile_image %}
                <img src="{{ artist.profile_image.url }}" alt="Artist Image">
            {% else %}
                <img src="{% static 'images/default-avatar.png' %}" alt="Artist Image">
            {% endif %}

            <h2>{{ artist.first_name }} {{ artist.last_name }}</h2>
            <p><strong>Email:</strong> {{ artist.email }}</p>
            <p><strong>Phone:</strong> {{ artist.phone }}</p> <!-- âœ… Display phone -->
            <p><strong>City:</strong> {{ artist.city }}</p>
            <p><strong>Experience:</strong> {{ artist.experience_years }} years</p>
            <p><strong>Works At:</strong> {{ artist.works_at }}</p>

            <button onclick="window.location.href='{% url 'book_artist' artist.id %}'">Book Now</button>
        </div>

        <!-- âœ… Training & Certificates Section -->
        <div class="training-section">
            <h3>Training & Certificates</h3>
            {% if artist.certificates.all %}
                <div class="certificates-container">
                    {% for certificate in artist.certificates.all %}
                        <div class="certificate-card">
                            <p> {{ certificate.uploaded_at|date:"F d, Y" }}</p>
                            
                            {% if certificate.certificate.url|lower|slice:'-4:' == ".jpg" or certificate.certificate.url|lower|slice:'-4:' == ".png" %}
                                <img src="{{ certificate.certificate.url }}" alt="Certificate" class="certificate-image">
                            {% else %}
                                <iframe src="{{ certificate.certificate.url }}" width="100%" height="200px"></iframe>
                            {% endif %}
        
                           
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p>No training certificates uploaded yet.</p>
            {% endif %}
        </div>
        

        <!-- âœ… Artist Work Section -->
        <div class="work-section">
            <h3>Work Showcase</h3>
            <div class="work-gallery">
                {% for work in works %}
                    <div class="work-card">
                        <img src="{{ work.image.url }}" alt="{{ work.title }}">
                        <h4>{{ work.title }}</h4>
                        <p>{{ work.description }}</p>
                    </div>
                {% empty %}
                    <p>No work uploaded yet.</p>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- âœ… Messenger Icon with Tooltip -->
    <div class="messenger-icon" onclick="openChat({{ artist.id }})">
        <i class="fab fa-facebook-messenger"></i>
        <span class="tooltip">Chat with Artist</span>
    </div>

    <script>
        function bookArtist(artistId) {
            alert("Booking artist ID: " + artistId);
        }

        function openChat(artistId) {
            // Ensure artistId is valid
            if (artistId) {
                window.location.href = "{% url 'start_chat' 0 %}".replace("0", artistId);
            } else {
                alert("Chat room not found for this artist.");
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
            const darkModeToggle = document.getElementById("dark-mode-toggle");
            const body = document.body;

            if (localStorage.getItem("darkMode") === "enabled") {
                body.classList.add("dark-mode");
                darkModeToggle.textContent = "â˜€ Light Mode";
            }

            darkModeToggle.addEventListener("click", function () {
                body.classList.toggle("dark-mode");

                if (body.classList.contains("dark-mode")) {
                    localStorage.setItem("darkMode", "enabled");
                    darkModeToggle.textContent = "â˜€ Light Mode";
                } else {
                    localStorage.setItem("darkMode", "disabled");
                    darkModeToggle.textContent = "ðŸŒ™ Dark Mode";
                }
            });
        });
    </script>
</body>
</html>
